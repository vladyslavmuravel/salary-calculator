<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥—É –º–µ–Ω–µ–¥–∂–µ—Ä–∞</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f6f7f9; padding:40px; }
    .card { max-width:600px; margin:auto; background:#fff; padding:30px; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,.1); }
    h1 { margin-bottom:20px; }
    label { display:block; margin-top:15px; font-weight:600; }
    input { width:100%; padding:10px; margin-top:5px; font-size:16px; }
    button { margin-top:25px; padding:12px; width:100%; font-size:18px; background:#ff6a00; color:#fff; border:none; border-radius:8px; cursor:pointer; }
    .result { margin-top:25px; background:#f0f3f7; padding:15px; border-radius:8px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ä–ø–ª–∞—Ç–∏</h1>

    <label>–ê–ø—Ä—É–≤ (%)</label>
    <input id="approve" type="number" value="80">

    <label>–í–∏–∫—É–ø (%)</label>
    <input id="buyout" type="number" value="70">

    <label>–°–µ—Ä–µ–¥–Ω—è –º–∞—Ä–∂–∞ –∑ 1 –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–≥—Ä–Ω)</label>
    <input id="marginPerOrder" type="number" value="160">

    <label>–ë–∞–∂–∞–Ω–∏–π –¥–æ—Ö—ñ–¥ (–≥—Ä–Ω)</label>
    <input id="target" type="number" value="30000">

    <button onclick="calculate()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>

    <div class="result" id="result"></div>
  </div>

<script>
function getRate(avg) {
  const table = [
    [55,5.5],[60,6.5],[65,7.5],[67,8.5],[68,9],[70,9.5],[72,9.7],
    [74,10],[76,10.5],[78,11],[80,11.5],[82,12]
  ];
  for (let i = table.length-1; i >= 0; i--) {
    if (avg >= table[i][0]) return table[i][1];
  }
  return 0;
}

function getMarginPercent(sum) {
  if (sum >= 204000) return 0.11;
  if (sum >= 180000) return 0.105;
  if (sum >= 144000) return 0.10;
  if (sum >= 120000) return 0.095;
  if (sum >= 96000) return 0.09;
  if (sum >= 72000) return 0.085;
  return 0.07;
}

function calculate() {
  const approve = +document.getElementById('approve').value;
  const buyout = +document.getElementById('buyout').value;
  const marginOne = +document.getElementById('marginPerOrder').value;
  const target = +document.getElementById('target').value;

  const avg = (approve + buyout) / 2;
  const rate = getRate(avg);

  let orders = 0;
  let income = 0;

  while (income < target && orders < 5000) {
    orders++;
    const marginSum = orders * marginOne;
    const percent = getMarginPercent(marginSum);
    const upsellIncome = marginSum * percent;
    const baseIncome = orders * rate;
    income = upsellIncome + baseIncome;
  }

  document.getElementById('result').innerHTML = `
    <b>–°–µ—Ä–µ–¥–Ω—ñ–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç:</b> ${avg.toFixed(1)}%<br>
    <b>–°—Ç–∞–≤–∫–∞ –∑–∞ –≤–∏–∫—É–ø:</b> ${rate} –≥—Ä–Ω<br><br>
    <b>–ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫—É–ø—ñ–≤:</b> <b>${orders}</b><br>
    <b>–ó–∞–≥–∞–ª—å–Ω–∞ –º–∞—Ä–∂–∞:</b> ${(orders*marginOne).toLocaleString()} –≥—Ä–Ω<br>
    <b>–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∏–π –¥–æ—Ö—ñ–¥:</b> <b>${income.toLocaleString()} –≥—Ä–Ω</b>
  `;
}
</script>
</body>
</html>
